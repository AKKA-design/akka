<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKKA | Neural Loom — Archives Maîtres</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Plus+Jakarta+Sans:wght@300;500;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --royal-blue: #020b1e; 
            --obsidian: #000000;
            --synaptic-orange: #ffaa00; 
            --loom-cyan: #00f3ff; 
        }

        body {
            background-color: var(--obsidian);
            color: #ffffff;
            font-family: 'Plus Jakarta Sans', sans-serif;
            margin: 0;
            overflow-x: hidden;
            scrollbar-width: none; 
        }
        body::-webkit-scrollbar { display: none; }

        /* --- 1. NEURAL BACKGROUND --- */
        #neural-canvas {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 0; pointer-events: none;
            background: radial-gradient(circle at center, #0a1936 0%, #000000 100%);
        }

        #main-stage {
            position: relative; z-index: 10; height: 100vh; width: 100%; overflow: hidden; 
        }

        .viewport {
            display: flex; align-items: center; height: 100%; width: fit-content; 
            padding-left: 10vw; padding-right: 10vw; will-change: transform;
        }

        /* --- 2. AMPLIFIED GLITCH --- */
        .glitch { position: relative; color: white; z-index: 1; }
        
        .glitch::before, .glitch::after {
            content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: transparent; opacity: 0; z-index: -1; 
        }

        .glitch::before { 
            color: var(--synaptic-orange); 
            animation: hyper-glitch-1 3s infinite linear alternate-reverse;
            text-shadow: 2px 0 5px var(--synaptic-orange);
        }
        
        .glitch::after { 
            color: var(--loom-cyan); 
            animation: hyper-glitch-2 2.5s infinite linear alternate-reverse; 
            text-shadow: -2px 0 5px var(--loom-cyan);
        }

        @keyframes hyper-glitch-1 {
            0% { clip-path: inset(20% 0 80% 0); transform: translate(-2px, 2px); opacity: 0; }
            5% { clip-path: inset(80% 0 10% 0); transform: translate(2px, -2px); opacity: 1; }
            10% { clip-path: inset(40% 0 50% 0); transform: translate(-2px, 2px); opacity: 1; }
            15% { clip-path: inset(10% 0 70% 0); transform: translate(2px, -2px); opacity: 1; }
            20% { opacity: 0; }
            100% { opacity: 0; }
        }

        @keyframes hyper-glitch-2 {
            0% { opacity: 0; }
            50% { opacity: 0; }
            55% { clip-path: inset(10% 0 60% 0); transform: translate(2px, 2px); opacity: 1; }
            60% { clip-path: inset(80% 0 5% 0); transform: translate(-2px, -2px); opacity: 1; }
            65% { clip-path: inset(30% 0 20% 0); transform: translate(2px, 0); opacity: 1; }
            70% { opacity: 0; }
            100% { opacity: 0; }
        }

        .signal-pulse { animation: pulse-opacity 3s infinite ease-in-out; text-shadow: 0 0 8px rgba(0, 243, 255, 0.6); }
        @keyframes pulse-opacity { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; } }

        /* --- 3. LOOM CARDS --- */
        .work-card {
            flex-shrink: 0; width: 35vw; margin-right: 10vw;
            position: relative; display: flex; flex-direction: column; justify-content: center;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94); cursor: pointer;
        }
        .work-card.focus { transform: scale(1.05); z-index: 20; }
        .artifact-raw {
            width: 100%; display: flex; justify-content: center; align-items: center;
            min-height: 200px; overflow: hidden; border-radius: 4px;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .artifact-raw img {
            width: 100%; height: auto; max-height: 70vh; object-fit: contain;
            box-shadow: 0 20px 60px rgba(0,0,0,0.6); transition: transform 0.5s ease;
        }
        .work-card:hover .artifact-raw img { transform: scale(1.03); }

        .meta-bar { margin-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 1rem; display: flex; justify-content: space-between; align-items: flex-end; }
        .syncopate { font-family: 'Syncopate', sans-serif; font-weight: 700; }
        nav { z-index: 100; mix-blend-difference: exclusion; }
        
        .progress-bar { position: fixed; bottom: 30px; left: 10vw; width: 80vw; height: 2px; background: rgba(255,255,255,0.1); z-index: 100; }
        #fill { height: 100%; width: 0%; background: var(--synaptic-orange); box-shadow: 0 0 20px var(--synaptic-orange); }

        /* --- 4. CONTACT NODE --- */
        .contact-node {
            position: relative; display: inline-block;
            margin-top: 0.8rem; padding: 8px 16px;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.02);
            transition: all 0.4s ease;
            overflow: hidden;
            white-space: nowrap;
        }
        .contact-node:hover {
            border-color: var(--synaptic-orange);
            background: rgba(255, 170, 0, 0.05);
            box-shadow: 0 0 15px rgba(255, 170, 0, 0.2);
            transform: translateY(-2px);
        }
        .contact-node::after {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        .contact-node:hover::after { left: 100%; }
        
        .contact-text {
            font-family: 'Plus Jakarta Sans', monospace; font-size: 11px; font-weight: 600; letter-spacing: 0.15em; color: white;
            transition: color 0.3s;
        }
        .contact-node:hover .contact-text { color: var(--synaptic-orange); }

        /* --- 5. SLIDE OVERLAY --- */
        #detail-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(2, 11, 30, 0.85); 
            z-index: 200; display: none; opacity: 0;
            overflow: hidden;
            backdrop-filter: blur(4px);
        }

        .detail-wrapper {
            position: relative; z-index: 10; width: 100%; height: 100%;
            display: flex; flex-direction: row; 
        }

        .detail-visual {
            flex: 6; height: 100%; display: flex; align-items: center; justify-content: center;
            padding: 4vw; border-right: 1px solid rgba(255,255,255,0.1);
        }
        .detail-visual img {
            max-width: 100%; max-height: 90vh; object-fit: contain;
            box-shadow: 0 0 80px rgba(0,0,0,0.9);
            transform: scale(0.95); opacity: 0; 
        }

        .detail-info {
            flex: 4; height: 100%; display: flex; flex-direction: column; 
            justify-content: center; padding: 4vw; position: relative;
        }

        .data-label {
            font-family: 'Syncopate', sans-serif; font-size: 10px; color: var(--loom-cyan);
            letter-spacing: 0.3em; margin-bottom: 10px; opacity: 0.8;
            display: flex; align-items: center; gap: 10px;
        }
        .data-label::before { content: ''; width: 20px; height: 1px; background: var(--loom-cyan); box-shadow: 0 0 5px var(--loom-cyan); }

        #detail-title {
            font-size: 3vw; line-height: 1.1; margin-bottom: 2rem; 
            text-transform: uppercase; color: white;
            text-shadow: 0 0 30px rgba(0,0,0,0.8);
        }
        
        #detail-desc {
            font-size: 1.2rem; font-weight: 300; line-height: 1.6;
            color: #e0e0e0; border-left: 2px solid var(--synaptic-orange);
            padding-left: 20px; max-width: 500px;
            text-shadow: 0 0 10px rgba(0,0,0,0.8);
        }

        .sci-footer {
            margin-top: auto; padding-top: 30px; border-top: 1px solid rgba(255,255,255,0.1);
            display: flex; justify-content: space-between; width: 100%;
            font-family: monospace; font-size: 10px; color: rgba(255,255,255,0.5);
        }

        .close-btn {
            position: absolute; top: 30px; right: 30px; z-index: 50;
            background: rgba(0,0,0,0.5); border: 1px solid var(--synaptic-orange);
            color: var(--synaptic-orange); padding: 10px 20px; cursor: pointer;
            font-family: 'Syncopate', sans-serif; font-size: 10px; letter-spacing: 0.2em;
            transition: all 0.3s;
        }
        .close-btn:hover { background: var(--synaptic-orange); color: black; }

        .key-hint {
            position: absolute; bottom: 30px; right: 30px;
            font-family: monospace; color: var(--synaptic-orange);
            font-size: 10px; letter-spacing: 0.1em;
            animation: blink 2s infinite; text-shadow: 0 0 5px var(--synaptic-orange);
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

        /* --- MOBILE FIXES --- */
        @media (max-width: 1024px) {
            .detail-wrapper { flex-direction: column; overflow-y: auto; }
            .detail-visual { flex: none; height: 50vh; border-right: none; border-bottom: 1px solid rgba(255,255,255,0.1); }
            .detail-info { flex: none; min-height: 50vh; padding: 10vw; }
            #detail-title { font-size: 2rem; }
            
            .work-card { width: 85vw !important; margin-right: 15vw !important; }
            .viewport { padding-left: 5vw !important; padding-right: 5vw !important; }
            
            .text-5xl { font-size: 2.5rem !important; }
            .text-xl { font-size: 1rem !important; }
        }
    </style>
</head>
<body>

    <canvas id="neural-canvas"></canvas>

    <nav class="fixed top-0 w-full p-10 flex justify-between items-start">
        <div>
            <h1 class="syncopate text-2xl tracking-[0.5em] glitch" data-text="AKKA">AKKA</h1>
            <p class="text-[9px] uppercase tracking-[0.8em] text-orange-500 mt-2 font-bold signal-pulse">Alchimiste Neural</p>
        </div>
        <div class="text-right">
            <p class="text-[10px] uppercase tracking-[0.4em] text-orange-500 font-bold signal-pulse">Vol. 1 — Archive 50</p>
            
            <div style="white-space: nowrap;">
                <a href="tel:00213553508943" class="contact-node">
                    <span class="contact-text">+213 553 50 89 43</span>
                </a>
            </div>

            <p class="text-[8px] opacity-40 mt-2 uppercase italic text-white">جاء الشتاء بحر وسماء</p>
        </div>
    </nav>

    <div id="main-stage">
        <div class="viewport" id="loom">
            <div class="work-card flex flex-col justify-center" style="width: 25vw; flex-shrink: 0; margin-right: 5vw;">
                <h2 class="syncopate text-5xl leading-tight mb-6 text-white">
                    <span class="glitch" data-text="LA">LA</span><br>
                    <span class="text-orange-500 glitch" data-text="TRAME">TRAME</span><br>
                    <span class="glitch" data-text="NEURALE">NEURALE</span>
                </h2>
                <div class="mb-4 border-l-2 border-orange-500 pl-4">
                    <h3 class="text-xl font-bold tracking-widest text-white signal-pulse">TECHNICIEN SUPÉRIEUR</h3>
                    <h3 class="text-xl font-bold tracking-widest text-white signal-pulse">EN ART ET INDUSTRIE</h3>
                    <h3 class="text-xl font-bold tracking-widest text-orange-500 signal-pulse">GRAPHIQUES</h3>
                </div>
            </div>
            </div>
    </div>
    <div class="progress-bar"><div id="fill"></div></div>

    <div id="detail-overlay">
        <button class="close-btn" onclick="closeDetail()">[ FERMER NŒUD ]</button>
        <div class="detail-wrapper">
            <div class="detail-visual">
                <img id="detail-img" src="" alt="">
            </div>
            <div class="detail-info">
                <div class="data-label">DONNÉES SYNAPTIQUES</div>
                <h2 id="detail-title" class="syncopate glitch"></h2>
                <div class="data-label" style="margin-top: 30px;">ANALYSE CONCEPTUELLE</div>
                <p id="detail-desc"></p>
                <div class="sci-footer">
                    <span id="detail-id">ID: 000</span>
                    <span>STATUT: CLASSÉ</span>
                    <span>ORIGINE: ALGERIE</span>
                </div>
                <div class="key-hint">◄ CLAVIER ► POUR NAVIGUER</div>
            </div>
        </div>
    </div>

    <script>
        gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);
        const loom = document.getElementById('loom');
        const detailOverlay = document.getElementById('detail-overlay');

        // --- DATA ARCHIVE (50 ITEMS) ---
        const worksData = Array.from({length: 50}, (_, i) => ({
            id: i + 1,
            title: `ARCHIVE_${(i+1).toString().padStart(3,'0')}`,
            desc: "Analyse conceptuelle de la structure et de la lumière. Baya Jury submission node."
        }));

        // INJECTION
        worksData.forEach((work, index) => {
            const card = document.createElement('div');
            card.className = 'work-card';
            card.onclick = () => openDetail(index);
            card.innerHTML = `
                <div class="artifact-raw"><img src="work${work.id}.jpg" loading="lazy" alt="${work.title}" onerror="this.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII='"></div>
                <div class="meta-bar">
                    <div>
                        <p class="text-[9px] text-orange-500 mb-1 tracking-widest uppercase font-bold signal-pulse">${work.desc.substring(0,25)}...</p>
                        <h3 class="syncopate text-xl uppercase tracking-tighter text-white glitch" data-text="${work.title}">${work.title}</h3>
                    </div>
                    <span class="text-3xl font-light opacity-10 syncopate text-white">#${work.id}</span>
                </div>`;
            loom.appendChild(card);
        });

        // SCROLL ENGINE WITH IMMERSIVE CANVAS MAPPING
        let scrollProgress = 0;
        function getScrollAmount() { return -(loom.scrollWidth - window.innerWidth); }
        
        const tween = gsap.to(loom, { 
            x: getScrollAmount, 
            ease: "none", 
            scrollTrigger: { 
                trigger: "#main-stage", 
                start: "top top", 
                end: () => `+=${getScrollAmount() * -1}`, 
                pin: true, 
                scrub: 1, 
                invalidateOnRefresh: true, 
                onUpdate: self => {
                    scrollProgress = self.progress; // Update global progress
                    document.getElementById('fill').style.width = self.progress * 100 + "%";
                }
            } 
        });
        
        // Navigation / Detail
        let currentIndex = -1;
        function openDetail(index) {
            currentIndex = index;
            const work = worksData[currentIndex];
            document.getElementById('detail-img').src = `work${work.id}.jpg`;
            document.getElementById('detail-title').innerText = work.title;
            document.getElementById('detail-title').setAttribute('data-text', work.title);
            document.getElementById('detail-desc').innerText = work.desc;
            document.getElementById('detail-id').innerText = `ID: ${work.id.toString().padStart(3, '0')}`;
            detailOverlay.style.display = 'block';
            gsap.to(detailOverlay, { opacity: 1, duration: 0.5 });
            gsap.fromTo("#detail-img", { scale: 1.1, opacity: 0 }, { scale: 0.95, opacity: 1, duration: 1, ease: "power2.out" });
        }

        function closeDetail() {
            gsap.to(detailOverlay, { opacity: 0, duration: 0.3, onComplete: () => detailOverlay.style.display = 'none' });
        }

        // NEURAL CANVAS ANIMATION (UPDATED FOR SCROLL)
        const canvas = document.getElementById('neural-canvas'), ctx = canvas.getContext('2d');
        let dots = [], mouse = {x:-1000, y:-1000};
        window.onresize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; initDots(); };
        window.onmousemove = e => { mouse.x = e.clientX; mouse.y = e.clientY; };
        
        function initDots() { 
            dots = Array.from({length: 120}, () => ({
                x:Math.random()*canvas.width, 
                y:Math.random()*canvas.height, 
                vx:(Math.random()-.5)*.5, 
                vy:(Math.random()-.5)*.5, 
                size:Math.random()*1.5+.5, 
                oSize:Math.random()*1.5+.5
            })); 
        }

        function animate() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            
            // Strategic animation increase based on scroll
            const intensity = 1 + (scrollProgress * 2); 

            dots.forEach(d => {
                // Apply scroll intensity to velocity
                d.x += d.vx * intensity; 
                d.y += d.vy * intensity;
                
                if(d.x<0||d.x>canvas.width) d.vx*=-1; 
                if(d.y<0||d.y>canvas.height) d.vy*=-1;
                
                const dist = Math.hypot(d.x-mouse.x, d.y-mouse.y);
                
                // Mouse interaction still takes priority
                d.size = dist<250 ? d.oSize*(1+(1-dist/250)*3) : d.oSize;
                
                ctx.fillStyle = `rgba(255,255,255,${dist<250?.9:.3})`; 
                ctx.beginPath(); 
                ctx.arc(d.x,d.y,d.size,0,Math.PI*2); 
                ctx.fill();
                
                if(dist<220) { 
                    ctx.strokeStyle=`rgba(255,107,0,${1-dist/220})`; 
                    ctx.beginPath(); 
                    ctx.moveTo(d.x,d.y); 
                    ctx.lineTo(mouse.x,mouse.y); 
                    ctx.stroke(); 
                }
            });
            requestAnimationFrame(animate);
        }
        window.onresize(); animate();
    </script>
</body>
</html>